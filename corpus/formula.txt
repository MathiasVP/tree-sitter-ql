===========
comparisons
===========

from File f
where (f = f)
  or f != f
  and f < f
  and (f > f or f <= f)
  and f >= f
select f

---

(source_file 
  (ql 
    (moduleBody 
      (select 
        (FROM )
        (var_decls 
          (var_decl 
            (type 
              (classname 
                (upperId )))
            (simpleId 
              (lowerId ))))
        (WHERE )
        (formula 
          (disjunction 
            (formula 
              (fparen 
                (OPAR )
                (formula 
                  (comparison 
                    (expr 
                      (primary 
                        (variable 
                          (varname 
                            (simpleId 
                              (lowerId ))))))
                    (compop )
                    (expr 
                      (primary 
                        (variable 
                          (varname 
                            (simpleId 
                              (lowerId ))))))))
                (CPAR )))
            (OR )
            (formula 
              (conjunction 
                (formula 
                  (conjunction 
                    (formula 
                      (conjunction 
                        (formula 
                          (comparison 
                            (expr 
                              (primary 
                                (variable 
                                  (varname 
                                    (simpleId 
                                      (lowerId ))))))
                            (compop )
                            (expr 
                              (primary 
                                (variable 
                                  (varname 
                                    (simpleId 
                                      (lowerId ))))))))
                        (AND )
                        (formula 
                          (comparison 
                            (expr 
                              (primary 
                                (variable 
                                  (varname 
                                    (simpleId 
                                      (lowerId ))))))
                            (compop )
                            (expr 
                              (primary 
                                (variable 
                                  (varname 
                                    (simpleId 
                                      (lowerId ))))))))))
                    (AND )
                    (formula 
                      (fparen 
                        (OPAR )
                        (formula 
                          (disjunction 
                            (formula 
                              (comparison 
                                (expr 
                                  (primary 
                                    (variable 
                                      (varname 
                                        (simpleId 
                                          (lowerId ))))))
                                (compop )
                                (expr 
                                  (primary 
                                    (variable 
                                      (varname 
                                        (simpleId 
                                          (lowerId ))))))))
                            (OR )
                            (formula 
                              (comparison 
                                (expr 
                                  (primary 
                                    (variable 
                                      (varname 
                                        (simpleId 
                                          (lowerId ))))))
                                (compop )
                                (expr 
                                  (primary 
                                    (variable 
                                      (varname 
                                        (simpleId 
                                          (lowerId ))))))))))
                        (CPAR )))))
                (AND )
                (formula 
                  (comparison 
                    (expr 
                      (primary 
                        (variable 
                          (varname 
                            (simpleId 
                              (lowerId ))))))
                    (compop )
                    (expr 
                      (primary 
                        (variable 
                          (varname 
                            (simpleId 
                              (lowerId ))))))))))))
        (SELECT )
        (as_exprs 
          (as_expr 
            (expr 
              (primary 
                (variable 
                  (varname 
                    (simpleId 
                      (lowerId ))))))))))))

==========
instanceof
==========

from Foo f
where f instanceof Foo
select f

---

(source_file 
  (ql 
    (moduleBody 
      (select 
        (FROM )
        (var_decls 
          (var_decl 
            (type 
              (classname 
                (upperId )))
            (simpleId 
              (lowerId ))))
        (WHERE )
        (formula 
          (instanceof 
            (expr 
              (primary 
                (variable 
                  (varname 
                    (simpleId 
                      (lowerId ))))))
            (INSTANCEOF )
            (type 
              (classname 
                (upperId )))))
        (SELECT )
        (as_exprs 
          (as_expr 
            (expr 
              (primary 
                (variable 
                  (varname 
                    (simpleId 
                      (lowerId ))))))))))))

=====
range
=====

from int i
where i in [0..10]
select i

---

(source_file 
  (ql 
    (moduleBody 
      (select 
        (FROM )
        (var_decls 
          (var_decl 
            (type 
              (INT ))
            (simpleId 
              (lowerId ))))
        (WHERE )
        (formula 
          (inrange 
            (expr 
              (primary 
                (variable 
                  (varname 
                    (simpleId 
                      (lowerId ))))))
            (IN )
            (range 
              (OBLOCK )
              (expr 
                (primary 
                  (literal 
                    (int ))))
              (RANGE )
              (expr 
                (primary 
                  (literal 
                    (int ))))
              (CBLOCK ))))
        (SELECT )
        (as_exprs 
          (as_expr 
            (expr 
              (primary 
                (variable 
                  (varname 
                    (simpleId 
                      (lowerId ))))))))))))